buildscript {
	repositories {
		mavenLocal()
		maven {
			url uri('libs')
		}
	}
	dependencies {
		classpath 'com.hmel:builder:0.1.2-SNAPSHOT'
	}
}
apply plugin: 'builder'

apply plugin: 'eclipse'
apply plugin: 'java'


schema {
	fileUri = "sql-files/"
	fileExtensions = ".sql"
	commentChar = "#"
}
datasource {
	//Load base sql configurations from the database.properties
	def props = new Properties()
	new File("myway/src/main/resources/database.properties").withInputStream {
		stream -> props.load(stream)
	}	
	//Fill schema configs
	login = props["db.username"]
	pswd = props["db.password"]
	url = props["db.url"]
	driver = props["db.driverClassName"]
}


jar {
        baseName = 'myway'
        version = '0.0.1'
}

repositories {
    	mavenCentral()
}
configurations{
	driver
}
dependencies {
	driver "mysql:mysql-connector-java:5.1.18"
	compile "org.springframework:spring-web:4.0.3.RELEASE"
}
URLClassLoader loader = GroovyObject.class.classLoader
configurations.driver.each {File file ->
	loader.addURL(file.toURL())
}
